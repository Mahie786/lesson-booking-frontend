(function(){"use strict";var e={4416:function(e,t,n){var s=n(5130),o=n(6768);const r={id:"app"};function a(e,t,n,s,a,i){const c=(0,o.g2)("nav-bar"),l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(c),(0,o.bF)(l)])}n(4114);var i=n(4232);const c={class:"navbar navbar-expand-lg navbar-light bg-white border-bottom"},l={class:"container"},d={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},u={class:"navbar-nav align-items-center"},f={class:"nav-item"},m={class:"nav-item ms-lg-3"},p={key:0,class:"badge bg-primary rounded-pill ms-2"};function h(e,t,n,s,r,a){const h=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",c,[(0,o.Lk)("div",l,[(0,o.bF)(h,{class:"navbar-brand fw-bold text-dark",to:"/lessons"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.Lk)("i",{class:"bi bi-book-half me-2"},null,-1),(0,o.eW)(" School Lessons ")]))),_:1}),t[4]||(t[4]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",d,[(0,o.Lk)("ul",u,[(0,o.Lk)("li",f,[(0,o.bF)(h,{to:"/lessons",class:"nav-link","active-class":"active fw-semibold"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)(" Lessons ")]))),_:1})]),(0,o.Lk)("li",m,[(0,o.bF)(h,{to:"/cart",class:"nav-link d-flex align-items-center","active-class":"active fw-semibold"},{default:(0,o.k6)((()=>[t[2]||(t[2]=(0,o.Lk)("i",{class:"bi bi-cart me-2"},null,-1)),t[3]||(t[3]=(0,o.eW)(" Cart ")),n.cartItemsCount>0?((0,o.uX)(),(0,o.CE)("span",p,(0,i.v_)(n.cartItemsCount),1)):(0,o.Q3)("",!0)])),_:1})])])])])])}var g={name:"NavBar",props:{cartItemsCount:{type:Number,default:0}}},b=n(1241);const v=(0,b.A)(g,[["render",h],["__scopeId","data-v-11898542"]]);var E=v,S={name:"App",components:{NavBar:E},mounted(){this.$store.dispatch("cart/initializeCart")},methods:{addToCart(e){this.cartItems.push({...e});const t=this.lessons.findIndex((t=>t.id===e.id));-1!==t&&this.lessons[t].spaces--},removeFromCart(e){const t=this.cartItems.findIndex((t=>t.id===e));if(-1!==t){const n=this.lessons.findIndex((t=>t.id===e));-1!==n&&this.lessons[n].spaces++,this.cartItems.splice(t,1)}}}};const y=(0,b.A)(S,[["render",a]]);var T=y,_=n(782),O=(n(8992),n(4520),n(2577),n(1454),n(8872),n(7550),{namespaced:!0,state:{items:[],loading:!1,error:null},mutations:{ADD_TO_CART(e,t){const n=e.items.find((e=>e._id===t._id));n||(e.items.push({...t,quantity:1,addedAt:(new Date).toISOString()}),localStorage.setItem("cart",JSON.stringify(e.items)))},UPDATE_QUANTITY(e,{lessonId:t,quantity:n}){const s=e.items.find((e=>e._id===t));s&&(s.quantity=n,localStorage.setItem("cart",JSON.stringify(e.items)))},REMOVE_FROM_CART(e,t){e.items=e.items.filter((e=>e._id!==t)),localStorage.setItem("cart",JSON.stringify(e.items))},CLEAR_CART(e){e.items=[],localStorage.removeItem("cart")},INIT_CART(e,t){e.items=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t}},actions:{initializeCart({commit:e}){const t=localStorage.getItem("cart");t&&e("INIT_CART",JSON.parse(t))},addToCart({commit:e},t){e("ADD_TO_CART",t)},updateQuantity({commit:e},{lessonId:t,quantity:n}){e("UPDATE_QUANTITY",{lessonId:t,quantity:n})},removeFromCart({commit:e},t){e("REMOVE_FROM_CART",t)},clearCart({commit:e}){e("CLEAR_CART")},async checkout({commit:e,state:t},n){try{e("SET_LOADING",!0),e("SET_ERROR",null);const s={name:n.name,phone:n.phone,lessons:t.items.map((e=>({lessonId:e._id,spaces:e.quantity||1})))},o=await fetch("https://lesson-booking-backend.onrender.com/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await o.json();if(r.success){for(const e of t.items)await fetch(`https://lesson-booking-backend.onrender.com/api/lessons/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:e.spaces-(e.quantity||1)})});return alert("Order placed successfully!"),e("CLEAR_CART"),{success:!0,order:r}}throw new Error(r.error||"Failed to process order")}catch(s){return e("SET_ERROR",s.message),{success:!1,error:s.message}}finally{e("SET_LOADING",!1)}}},getters:{cartItems:e=>e.items,sortedCartItems:e=>[...e.items].sort(((e,t)=>new Date(t.addedAt)-new Date(e.addedAt))),hasItems:e=>e.items.length>0,isLessonInCart:e=>t=>e.items.some((e=>e._id===t)),cartItemCount:e=>e.items.length,cartTotal:e=>e.items.reduce(((e,t)=>e+t.price*(t.quantity||1)),0)}}),C={namespaced:!0,state:{lessons:[],loading:!1,error:null,searchTerm:"",sortBy:"subject",sortOrder:"asc"},mutations:{SET_LESSONS(e,t){e.lessons=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_SEARCH_TERM(e,t){e.searchTerm=t},SET_SORT(e,{sortBy:t,sortOrder:n}){e.sortBy=t,e.sortOrder=n},DECREMENT_SPACES(e,t){const n=e.lessons.find((e=>e._id===t));n&&n.spaces>0&&n.spaces--}},actions:{initializeLessons({commit:e},t){e("SET_LESSONS",t)},async fetchLessons({commit:e}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const t=await fetch("https://lesson-booking-backend.onrender.com/api/lessons"),n=await t.json()||{};if(console.log("result",n),!n?.success)throw new Error("Failed to fetch lessons");e("SET_LESSONS",n?.data)}catch(t){e("SET_ERROR","Failed to load lessons"),console.error("Error fetching lessons:",t)}finally{e("SET_LOADING",!1)}},async updateSearch({commit:e},t){e("SET_LOADING",!0),e("SET_ERROR",null),e("SET_SEARCH_TERM",t);try{const n=await fetch(`https://lesson-booking-backend.onrender.com/api/lessons/search?searchString=${t}`),s=await n.json()||{};if(!s?.success)throw new Error("Failed to fetch lessons");e("SET_LESSONS",s?.data)}catch(n){e("SET_ERROR","Failed to load lessons"),console.error("Error fetching lessons:",n)}finally{e("SET_LOADING",!1)}},updateSort({commit:e},t){console.log("Sort data:",t),e("SET_SORT",t)},async decrementSpaces({commit:e},t){try{e("DECREMENT_SPACES",t);const n=await fetch(`https://lesson-booking-backend.onrender.com/api/lessons/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:spaces-1})});console.log("response",n);const s=await(n?.data?.json());e("SET_LESSONS",s)}catch(n){e("SET_ERROR","Failed to load lessons"),console.error("Error fetching lessons:",n)}finally{e("SET_LOADING",!1)}}},getters:{filteredLessons:e=>{let t=[...e.lessons];return t.sort(((t,n)=>{const s=t[e.sortBy],o=n[e.sortBy];if("string"===typeof s){const t=s.localeCompare(o);return"asc"===e.sortOrder?t:-t}{const t=s-o;return"asc"===e.sortOrder?t:-t}})),t}}},R=(0,_.y$)({modules:{cart:O,lessons:C}}),A=n(1387);const k=[{path:"/",redirect:"/lessons"},{path:"/cart",name:"Cart",component:()=>n.e(532).then(n.bind(n,7532))},{path:"/lessons",name:"Lessons",component:()=>n.e(852).then(n.bind(n,5852))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>n.e(353).then(n.bind(n,7353))}],N=(0,A.aE)({history:(0,A.Bt)(),routes:k});var I=N;n(9953);const L=(0,s.Ef)(T);L.use(I),L.use(R),L.mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,r){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],r=e[d][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,s){return n.f[s](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{353:"e39f2b5f",532:"7a19e245",852:"926c09cc"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{532:"23b6b021",852:"fcfb4ece"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="school-lessons:";n.l=function(s,o,r,a){if(e[s])e[s].push(o);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+r){i=u;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=s),e[s]=[o];var f=function(t,n){i.onerror=i.onload=null,clearTimeout(m);var o=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/school-lessons/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,o,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",n.nc&&(a.nonce=n.nc);var i=function(n){if(a.onerror=a.onload=null,"load"===n.type)o();else{var s=n&&n.type,i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,a.parentNode&&a.parentNode.removeChild(a),r(c)}};return a.onerror=a.onload=i,a.href=t,s?s.parentNode.insertBefore(a,s.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var o=n[s],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var a=document.getElementsByTagName("style");for(s=0;s<a.length;s++){o=a[s],r=o.getAttribute("data-href");if(r===e||r===t)return o}},s=function(s){return new Promise((function(o,r){var a=n.miniCssF(s),i=n.p+a;if(t(a,i))return o();e(s,i,null,o,r)}))},o={524:0};n.f.miniCss=function(e,t){var n={532:1,852:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=s(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,s){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var r=new Promise((function(n,s){o=e[t]=[n,s]}));s.push(o[2]=r);var a=n.p+n.u(t),i=new Error,c=function(s){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,o[1](i)}};n.l(a,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,r,a=s[0],i=s[1],c=s[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var d=c(n)}for(t&&t(s);l<a.length;l++)r=a[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},s=self["webpackChunkschool_lessons"]=self["webpackChunkschool_lessons"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(4416)}));s=n.O(s)})();
//# sourceMappingURL=app.6ff1290f.js.map