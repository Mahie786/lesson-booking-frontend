"use strict";(self["webpackChunkschool_lessons"]=self["webpackChunkschool_lessons"]||[]).push([[852],{5852:function(s,e,a){a.r(e),a.d(e,{default:function(){return as}});var t=a(6768);const o={class:"lessons-container"};function r(s,e,a,r,n,l){const c=(0,t.g2)("search-sort-bar"),i=(0,t.g2)("lesson-list");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(c,{onSearch:l.handleSearch,onUpdateSort:l.handleSort},null,8,["onSearch","onUpdateSort"]),(0,t.bF)(i,{lessons:s.filteredLessons,loading:s.loading,error:s.error,onAddToCart:l.handleAddToCart},null,8,["lessons","loading","error","onAddToCart"])])}var n=a(782),l=a(5130);const c={class:"search-sort-container border-bottom"},i={class:"container py-4"},d={class:"row g-4 align-items-end justify-content-between"},h={class:"col-md-5"},u={class:"form-group"},p={class:"search-input-wrapper"},L={class:"col-md-7"},b={class:"sort-controls"},k={class:"sort-group"},v={class:"sort-group"};function m(s,e,a,o,r,n){return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",i,[(0,t.Lk)("div",d,[(0,t.Lk)("div",h,[(0,t.Lk)("div",u,[e[9]||(e[9]=(0,t.Lk)("label",{class:"control-label"},"Search",-1)),(0,t.Lk)("div",p,[e[8]||(e[8]=(0,t.Lk)("div",{class:"search-icon"},[(0,t.Lk)("i",{class:"bi bi-search"})],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>r.searchTerm=s),onInput:e[1]||(e[1]=(...s)=>n.handleSearch&&n.handleSearch(...s)),placeholder:"Search lessons...",class:"search-input"},null,544),[[l.Jo,r.searchTerm]]),r.searchTerm?((0,t.uX)(),(0,t.CE)("button",{key:0,onClick:e[2]||(e[2]=(...s)=>n.clearSearch&&n.clearSearch(...s)),class:"clear-button",title:"Clear search"},e[7]||(e[7]=[(0,t.Lk)("i",{class:"bi bi-x-lg"},null,-1)]))):(0,t.Q3)("",!0)])])]),(0,t.Lk)("div",L,[(0,t.Lk)("div",b,[(0,t.Lk)("div",k,[e[11]||(e[11]=(0,t.Lk)("label",{class:"control-label"},"Sort by",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.sortBy=s),onChange:e[4]||(e[4]=(...s)=>n.onChangeSort&&n.onChangeSort(...s)),class:"sort-select"},e[10]||(e[10]=[(0,t.Lk)("option",{value:"subject"},"Subject",-1),(0,t.Lk)("option",{value:"location"},"Location",-1),(0,t.Lk)("option",{value:"price"},"Price",-1),(0,t.Lk)("option",{value:"spaces"},"Availability",-1)]),544),[[l.u1,r.sortBy]])]),(0,t.Lk)("div",v,[e[13]||(e[13]=(0,t.Lk)("label",{class:"control-label"},"Order",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>r.sortOrder=s),onChange:e[6]||(e[6]=(...s)=>n.onChangeSort&&n.onChangeSort(...s)),class:"sort-select"},e[12]||(e[12]=[(0,t.Lk)("option",{value:"asc"},"Ascending",-1),(0,t.Lk)("option",{value:"desc"},"Descending",-1)]),544),[[l.u1,r.sortOrder]])])])])])])])}var C={name:"SearchSort",data(){return{sortBy:"subject",sortOrder:"asc",searchTerm:""}},methods:{handleSearch(){this.$emit("search",this.searchTerm)},clearSearch(){this.searchTerm="",this.handleSearch()},onChangeSort(){this.$emit("update-sort",{sortBy:this.sortBy,sortOrder:this.sortOrder})}}},f=a(1241);const S=(0,f.A)(C,[["render",m]]);var g=S,y=a(4232);const A={class:"container py-4"},x={key:0,class:"text-center py-4"},T={key:1,class:"text-center py-4"},w={class:"alert alert-danger",role:"alert"},_={key:2},I={key:0,class:"text-center py-4"},E={key:1,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"};function X(s,e,a,o,r,n){const l=(0,t.g2)("LessonCard");return(0,t.uX)(),(0,t.CE)("div",A,[a.loading?((0,t.uX)(),(0,t.CE)("div",x,e[0]||(e[0]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):a.error?((0,t.uX)(),(0,t.CE)("div",T,[(0,t.Lk)("div",w,(0,y.v_)(a.error),1)])):((0,t.uX)(),(0,t.CE)("div",_,[e[2]||(e[2]=(0,t.Lk)("h2",{class:"mb-4"},"Available Lessons",-1)),0===a.lessons.length?((0,t.uX)(),(0,t.CE)("div",I,e[1]||(e[1]=[(0,t.Lk)("p",{class:"text-muted"},"No lessons found.",-1)]))):((0,t.uX)(),(0,t.CE)("div",E,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.lessons,(s=>((0,t.uX)(),(0,t.CE)("div",{class:"col",key:s.id},[(0,t.bF)(l,{lesson:s,onAddToCart:n.handleAddToCart},null,8,["lesson","onAddToCart"])])))),128))]))]))])}const j={class:"lesson-card card h-100 border-0 shadow-sm hover-effect rounded-4 overflow-hidden"},B={class:"card-header bg-gradient d-flex justify-content-between align-items-center py-3"},O={class:"card-title mb-0"},U={class:"subject-icon me-3"},F={class:"card-body"},V={class:"info-list"},$={class:"info-item d-flex align-items-center mb-3"},q={class:"fw-medium"},N={class:"info-item d-flex align-items-center mb-3"},P={class:"fw-medium"},D={class:"info-item d-flex align-items-center"},H={class:"info-icon me-3"},J={class:"card-footer border-0 bg-transparent p-4"},K=["disabled"],Q={class:"btn-text"};function z(s,e,a,o,r,n){return(0,t.uX)(),(0,t.CE)("div",j,[(0,t.Lk)("div",B,[(0,t.Lk)("h5",O,(0,y.v_)(a.lesson.subject),1),(0,t.Lk)("div",U,[(0,t.Lk)("i",{class:(0,y.C4)([a.lesson.icon,"fs-3"])},null,2)])]),(0,t.Lk)("div",F,[(0,t.Lk)("div",V,[(0,t.Lk)("div",$,[e[2]||(e[2]=(0,t.Lk)("div",{class:"info-icon me-3"},[(0,t.Lk)("i",{class:"bi bi-geo-alt-fill text-primary"})],-1)),(0,t.Lk)("div",null,[e[1]||(e[1]=(0,t.Lk)("small",{class:"text-muted d-block"},"Location",-1)),(0,t.Lk)("span",q,(0,y.v_)(a.lesson.location),1)])]),(0,t.Lk)("div",N,[e[4]||(e[4]=(0,t.Lk)("div",{class:"info-icon me-3"},[(0,t.Lk)("i",{class:"bi bi-tag-fill text-primary"})],-1)),(0,t.Lk)("div",null,[e[3]||(e[3]=(0,t.Lk)("small",{class:"text-muted d-block"},"Price",-1)),(0,t.Lk)("span",P,"Â£"+(0,y.v_)(a.lesson.price),1)])]),(0,t.Lk)("div",D,[(0,t.Lk)("div",H,[(0,t.Lk)("i",{class:(0,y.C4)(["bi bi-people-fill",n.spacesColorClass])},null,2)]),(0,t.Lk)("div",null,[e[5]||(e[5]=(0,t.Lk)("small",{class:"text-muted d-block"},"Available Spaces",-1)),(0,t.Lk)("span",{class:(0,y.C4)(["fw-medium",n.spacesColorClass])},(0,y.v_)(a.lesson.spaces),3)])])])]),(0,t.Lk)("div",J,[(0,t.Lk)("button",{onClick:e[0]||(e[0]=(...s)=>n.handleAddToCart&&n.handleAddToCart(...s)),disabled:!n.hasAvailableSpaces||n.isInCart,class:(0,y.C4)(["btn w-100 position-relative overflow-hidden",n.buttonClasses])},[(0,t.Lk)("span",Q,(0,y.v_)(n.buttonText),1),(0,t.Lk)("i",{class:(0,y.C4)(["bi position-absolute end-0 me-3",n.cartIconClass])},null,2)],10,K)])])}var G={name:"LessonCard",props:{lesson:{type:Object,required:!0,validator(s){return["_id","subject","location","price","spaces","icon"].every((e=>e in s))}}},computed:{...(0,n.L8)("cart",["isLessonInCart"]),hasAvailableSpaces(){return this.lesson.spaces>0},isInCart(){return this.isLessonInCart(this.lesson._id)},buttonText(){return this.isInCart?"In Cart":this.hasAvailableSpaces?"Add to Cart":"No Spaces Left"},buttonClasses(){return this.isInCart?"btn-success":this.hasAvailableSpaces?"btn-primary":"btn-secondary opacity-50"},cartIconClass(){return this.isInCart?"bi-check-circle":"bi-cart-plus"},spacesColorClass(){return 0===this.lesson.spaces?"text-danger":this.lesson.spaces<=2?"text-warning":"text-primary"}},methods:{handleAddToCart(){this.hasAvailableSpaces&&!this.isInCart&&this.$emit("add-to-cart",this.lesson)}}};const M=(0,f.A)(G,[["render",z],["__scopeId","data-v-6967dd18"]]);var R=M,W={name:"LessonList",components:{LessonCard:R},props:{lessons:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},methods:{handleAddToCart(s){this.$emit("add-to-cart",s)}}};const Y=(0,f.A)(W,[["render",X],["__scopeId","data-v-4a1f3196"]]);var Z=Y,ss={name:"LessonsView",components:{SearchSortBar:g,LessonList:Z},computed:{...(0,n.aH)("lessons",["loading","error"]),...(0,n.L8)("lessons",["filteredLessons"])},methods:{...(0,n.i0)("lessons",["updateSearch","updateSort","decrementSpaces","fetchLessons"]),...(0,n.i0)("cart",["addToCart"]),handleSearch(s){this.updateSearch(s)},handleSort(s){this.updateSort(s)},handleAddToCart(s){s.spaces>0&&(this.addToCart(s),this.decrementSpaces(s._id),this.fetchLessons())}},created(){this.fetchLessons()}};const es=(0,f.A)(ss,[["render",r],["__scopeId","data-v-67822b2a"]]);var as=es}}]);
//# sourceMappingURL=852.926c09cc.js.map